<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Djedefre</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
</head>
<body>
<!-- variables{appendix}=90 -->
<!-- variables{COVER}=no -->
<!-- variables{TOC}=1 -->
<!-- variables{author}=ljm -->
<!-- variables{title}=Djedefre -->
<!-- variables{subtitle}=a network documentation tool -->
<!-- variables{cover}=cover.png -->
<!-- variables{do_cover}=yes -->
<!-- variables{TOC}=1 -->
<!-- variables{author}=ljm -->
<!-- variables{title}=Djedefre -->
<!-- variables{subtitle}=a network documentation tool -->
<!-- variables{cover}=cover.png -->
<!-- variables{do_cover}=yes -->
<h1 id="a1.">
1.
Intro
</h1>
<!-- paragraph type 0 -->
<p class="paragraph">
Djedefre is a tool for documenting your network. 
</p>
<!-- paragraph type 0 -->
<p class="paragraph">
Djedefre consists of 3 parts:
</p>
<ul>
<li>
<div class=list>
the database
</div>
</li>
<li>
<div class=list>
scan scripts
</div>
</li>
<li>
<div class=list>
the GUI
</div>
</li>
</ul>
<!-- paragraph type 0 -->
<p class="paragraph">
The scan scripts fill the database. The GUI displays the network in the database and
allows the user to change certain values. The database is created when the GUI is
first started.
</p>
<!-- paragraph type 0 -->
<p class="paragraph">
Some time ago, there was a tool called Cheops, that automated network discovery and gave 
a nice drawing of the network. Cheops is now abandonware. Djedefre was pharao after Cheops.
</p>
<h1 id="a2.">
2.
Using Djedefre
</h1>
<h2 id="a2.1.">
2.1.
First start
</h2>
<!-- paragraph type 0 -->
<p class="paragraph">
After installing or unpacking,
</p>
<ul>
<li>
<div class=list>
Move to the directory where 
<tt>
Djedefre
</tt>
is installed.
</div>
</li>
<li>
<div class=list>
Make sure that there is a directory
<tt>
database
</tt>
and create it if it is not there
</div>
</li>
<li>
<div class=list>
start the GUI with
<tt>
./dedefre.pl &amp;
</tt>
</div>
</li>
</ul>
<!-- paragraph type 0 -->
<p class="paragraph">
You will be greeted with a cartouche depicting the hieroglyphs for Djedefre with a number of buttons above it.
</p>
<div style="text-align: center">
<img src="block/djedefre_opening.png" alt="djedefre_opening.xcf" width=400 >
</div>
<!-- paragraph type 0 -->
<p class="paragraph">
The buttons give access to functionality:
</p>
<ul>
<li>
<div class=list>
List network provides several lists (servers, subnets, interfaces)
</div>
</li>
<li>
<div class=list>
Plot network provides a drawing of the network
</div>
</li>
<li>
<div class=list>
Options tell Djedefre to do or change something
</div>
</li>
</ul>
<!-- paragraph type 0 -->
<p class="paragraph">
At this point, when you press the &quot;Plot network&quot;, you will get an empty drawing.
</p>
<h2 id="a2.2.">
2.2.
Start scanning
</h2>
<!-- paragraph type 0 -->
<p class="paragraph">
To get some information into the database, scan-scripts are used. These scan-scripts can be 
launched from the &quot;Options&quot; page. Although it is possible to launch the scripts in any
sequence you like, some scripts rely on information in the database. For example: the &quot;subnet&quot;
scan scans all the subnets in the database. If there are no subnets, nothing is scanned.
</p>
<!-- paragraph type 0 -->
<p class="paragraph">
The best start would be to scab the &quot;local system&quot;. This launches the script
<tt>
scan_local_system.sh
</tt>
in the
<tt>
scan_scripts
</tt>
directory in a separate
<tt>
xterm
</tt>
window. 
</p>
<!-- paragraph type 0 -->
<p class="paragraph">
When the scan is finished, the plot page will show the local system and the subnets that it 
is connected to.
</p>
<div style="text-align: center">
<img src="block/djedefre_localsys.png" alt="djedefre_localsys.xcf" width=179.5 >
</div>
<!-- paragraph type 0 -->
<p class="paragraph">
With the left mouse button, you can pick-up the server and the subnets and place them anywhere
on the canvas that you like.
</p>
<div style="text-align: center">
<img src="block/djedefre_localsys2.png" alt="djedefre_localsys2.xcf" width=312 >
</div>
<!-- paragraph type 0 -->
<p class="paragraph">
As there are now subnets in the database, a scan of the subnets is possible. Select &quot;subnet&quot; 
under Scan scripts in the Options page. Again, an 
<tt>
xterm
</tt>
window opens, and when it is finished, the plot will look something like this:
</p>
<div style="text-align: center">
<img src="block/djedefre_subnet.png" alt="djedefre_subnet.xcf" width=400 >
</div>
<!-- paragraph type 0 -->
<p class="paragraph">
Servers are placed in neat little rows and can be placed anywhere on the canvas, again with the left mouse button.
With the right mouse button, a detail window opens that allows you to change the type, change the name or merge servers together.
It is also possible to delete the server or do a port scan on it. 
</p>
<div style="text-align: center">
<img src="block/djedefre_srvdet.png" alt="djedefre_srvdet.xcf" width=196.5 >
</div>
<h2 id="a2.3.">
2.3.
Scanning the network
</h2>
<!-- paragraph type 0 -->
<p class="paragraph">
You may have noticed that the scan of subnets did not provide a complete list of all the
servers on the network. This is because the subnet scan uses
<tt>
fping
</tt>
to scan the subnet. Typically, for example, Windows 10 does not reply to a ping, so 
no Windows 10 machines will show up. An ARP scan however will detect those machines if they&apos;re on
the same layer 2 segment.
</p>
<!-- paragraph type 0 -->
<p class="paragraph">
There are a number of scan scripts available. 
These scripts try to find out what the network lay-out is, what the systems are.
</p>
<ul>
<li>
<div class=list>
local_system 
</div>
</li>
<li>
<div class=list>
subnet 
</div>
</li>
<li>
<div class=list>
arp 
</div>
</li>
<li>
<div class=list>
access 
</div>
</li>
<li>
<div class=list>
type 
</div>
</li>
<li>
<div class=list>
server 
</div>
</li>
<li>
<div class=list>
remote_system 
</div>
</li>
<li>
<div class=list>
cisco 
</div>
</li>
<li>
<div class=list>
dns 
</div>
</li>
<li>
<div class=list>
vbox  
</div>
</li>
<li>
<div class=list>
status 
</div>
</li>
<li>
<div class=list>
internet 
</div>
</li>
<li>
<div class=list>
database_integrity
</div>
</li>
</ul>
<!-- paragraph type 0 -->
<p class="paragraph">
The scan scripts are in the diretcory
<tt>
scan_scripts
</tt>
and they are called
<tt>
scan_xxxxx.sh
</tt>
with 
<tt>
xxxxx
</tt>
meaning the name of the scan.
</p>
<h3 id="a2.3.1.">
2.3.1.
local_system 
</h3>
<!-- paragraph type 0 -->
<p class="paragraph">
Adds the local system to the network. Also adds the interfaces and the subnets that the system is connected
to. 
</p>
<h3 id="a2.3.2.">
2.3.2.
subnet 
</h3>
<!-- paragraph type 0 -->
<p class="paragraph">
Scans all the known subnets for servers. Uses
<tt>
sudo fping
</tt>
for the scan.
</p>
<h3 id="a2.3.3.">
2.3.3.
arp 
</h3>
<h3 id="a2.3.4.">
2.3.4.
access 
</h3>
<h3 id="a2.3.5.">
2.3.5.
type 
</h3>
<h3 id="a2.3.6.">
2.3.6.
server 
</h3>
<h3 id="a2.3.7.">
2.3.7.
remote_system 
</h3>
<h3 id="a2.3.8.">
2.3.8.
cisco 
</h3>
<h3 id="a2.3.9.">
2.3.9.
dns 
</h3>
<h3 id="a2.3.10.">
2.3.10.
vbox  
</h3>
<h3 id="a2.3.11.">
2.3.11.
status 
</h3>
<h3 id="a2.3.12.">
2.3.12.
internet 
</h3>
<h3 id="a2.3.13.">
2.3.13.
database_integrity
</h3>
</body>
